{"version":3,"file":"LazyJsonUndoRedo.min.js","sources":["LazyJsonUndoRedo.js"],"names":["root","factory","define","amd","LazyJsonUndoRedo","exports","module","this","obj","support","checkSupport","usePolymerShim","Error","_history","_whitelists","_pointer","_recChanges","bind","observeTree","flagCounter","p","prototype","route","concat","observe","Object","keys","forEach","key","indexOf","_isListenable","unobserveTree","unobserve","changes","length","splice","change","push","object","name","rec","create","undo","startFlagIdx","_reverseRecord","redo","endFlagIdx","deliverChangeRecords","temp","type","oldValue","Array","apply","index","addedCount","removed","startFlag","endFlag","flag","wrap","fn","ctx","that","slice","call","arguments","setWhitelist","list","removeWhitelist","getWhitelist","i","l","paramName","wl","observeFn","constructor","isArray","unobserveFn","window","Platform","isObserved","observeds","observeObj","observer","ObjectObserver","observers","open","added","changed","getOldValueFn","property","observeArr","arr","ArrayObserver","splices","_isPolymerShimInited","usingShim","performMicrotaskCheckpoint","idx","close"],"mappings":"CAAC,SAAUA,EAAMC,GACS,kBAAXC,SAAyBA,OAAOC,KAEvCH,EAAKI,iBAAmBH,IAExBC,OAAO,WACH,MAAOF,GAAKI,oBAEU,gBAAZC,SAEdC,OAAOD,QAAUJ,IAGjBD,EAAKI,iBAAmBH,KAE9BM,KAAM,WACJ,YAIA,SAASH,GAAiBI,GAEtB,GAAIC,GAAUL,EAAiBM,cAE/B,IAAgB,YAAZD,EACAF,KAAKI,qBAEJ,KAAKF,EACN,KAAMG,OAAM,4DAGhBL,MAAKM,YACLN,KAAKO,eACLP,KAAKQ,SAAW,GAChBR,KAAKS,YAAcT,KAAKS,YAAYC,KAAKV,MAEzCA,KAAKW,YAAYV,GAlBrB,GAAIW,GAAc,EAqBdC,EAAIhB,EAAiBiB,SAmZzB,OA3YAD,GAAEF,YAAc,SAAUV,EAAKc,GAEtBd,GAAuB,gBAAV,KAIlBc,GAASA,OAAaC,QAAQf,IAE9BD,KAAKiB,QAAQhB,GAEbiB,OAAOC,KAAKlB,GAAKmB,QAAQ,SAAUC,GAEN,gBAAdpB,GAAIoB,IACiB,KAA5BN,EAAMO,QAAQrB,EAAIoB,KAClBrB,KAAKuB,cAActB,EAAKoB,IAExBrB,KAAKW,YAAYV,EAAIoB,GAAMN,IAEhCf,QAGPa,EAAEW,cAAgB,SAASvB,EAAKc,GAEvBd,GAAuB,gBAAV,KAIlBc,GAASA,OAAaC,QAAQf,IAE9BD,KAAKyB,UAAUxB,GAEfiB,OAAOC,KAAKlB,GAAKmB,QAAQ,SAAUC,GAEN,gBAAdpB,GAAIoB,IACiB,KAA5BN,EAAMO,QAAQrB,EAAIoB,KAElBrB,KAAKwB,cAAcvB,EAAIoB,KAE5BrB,QAQPa,EAAEJ,YAAc,SAASiB,GAEjB1B,KAAKQ,SAAWR,KAAKM,SAASqB,OAAS,GAEvC3B,KAAKM,SAASsB,OAAO5B,KAAKQ,SAAW,GAGzCkB,EAAQN,QAAQ,SAAUS,GAEtB,GAAuB,gBAAb,GAEN7B,KAAKM,SAASwB,KAAKD,KAEjB7B,KAAKQ,aAEN,IAAIR,KAAKuB,cAAcM,EAAOE,OAAQF,EAAOG,MAAO,CAErD,GAAIC,GAAMf,OAAOgB,OAAO,KAExBhB,QAAOC,KAAKU,GAAQT,QAAQ,SAAUC,GAElCY,EAAIZ,GAAOQ,EAAOR,KAGtBrB,KAAKM,SAASwB,KAAKG,GAEnBjC,KAAKW,YAAYkB,EAAOE,UAEtB/B,KAAKQ,WAEZR,OAGPa,EAAEsB,KAAO,WAIL,GAFAnC,KAAKiC,MAEDjC,KAAKQ,SAAW,EAEhB,OAAO,CAGX,IAAIyB,GAAMjC,KAAKM,SAASN,KAAKQ,WAE7B,IAAoB,gBAAV,GAAoB,CAE1B,GAAI4B,GAAepC,KAAKM,SAASgB,QAAQW,EAAM,EAE/C,IAAqB,KAAjBG,EAAqB,CAErB,KAAOpC,KAAKQ,WAAa4B,GAErBpC,KAAKqC,eAAerC,KAAKM,SAASN,KAAKQ,YAG3CR,MAAKQ,gBAITR,MAAKqC,eAAeJ,IAI5BpB,EAAEyB,KAAO,WAIL,GAFAtC,KAAKiC,MAEDjC,KAAKQ,UAAYR,KAAKM,SAASqB,OAAS,EAExC,OAAO,CAGX,IAAIM,GAAMjC,KAAKM,WAAWN,KAAKQ,SAE/B,IAAoB,gBAAV,GAAoB,CAE1B,GAAI+B,GAAavC,KAAKM,SAASgB,QAAQW,EAAM,EAE7C,IAAmB,KAAfM,EAEA,OAASvC,KAAKQ,WAAa+B,GAEvBvC,KAAKqC,eAAerC,KAAKM,SAASN,KAAKQ,eAK/CR,MAAKqC,eAAeJ,IAI5BpB,EAAEoB,IAAM,WAEJf,OAAOsB,qBAAqBxC,KAAKS,cAGrCI,EAAEwB,eAAiB,SAAUJ,GAEzB,GAAoB,gBAAV,GAAV,CAIA,GAAIQ,EAIJ,QAFAzC,KAAKyB,UAAUQ,EAAIF,QAEXE,EAAIS,MAER,IAAK,MACDT,EAAIS,KAAO,SACXT,EAAIU,SAAWV,EAAIF,OAAOE,EAAID,YACvBC,GAAIF,OAAOE,EAAID,KACtB,MAEJ,KAAK,SACDS,EAAOR,EAAIF,OAAOE,EAAID,MACtBC,EAAIF,OAAOE,EAAID,MAAQC,EAAIU,SAC3BV,EAAIU,SAAWF,CACf,MAEJ,KAAK,SACDR,EAAIS,KAAO,MACXT,EAAIF,OAAOE,EAAID,MAAQC,EAAIU,eACpBV,GAAIU,QACX,MAEJ,KAAK,SACDF,EAAOG,MAAM9B,UAAUc,OAAOiB,MAAMZ,EAAIF,QAASE,EAAIa,MAAOb,EAAIc,YAAY/B,OAAOiB,EAAIe,UACvFf,EAAIc,WAAad,EAAIe,QAAQrB,OAC7BM,EAAIe,QAAUP,EAItBzC,KAAKiB,QAAQgB,EAAIF,UAQrBlB,EAAEoC,UAAY,WAKV,MAHAjD,MAAKiC,MAELjC,KAAKS,aAAaG,MACXA,KAGXC,EAAEqC,QAAU,SAAUC,GAElBnD,KAAKiC,MACLjC,KAAKS,aAAa0C,KAGtBtC,EAAEuC,KAAO,SAAUC,EAAIC,GAEnB,GAAIC,GAAOvD,IAEX,OAAO,YAEH,GAAIkD,GAAUK,EAAKN,WAEnBI,GAAGR,MAAMS,EAAKV,MAAM9B,UAAU0C,MAAMC,KAAKC,UAAY,IAErDH,EAAKL,QAAQA,KASrBrC,EAAE8C,aAAe,SAAU1D,EAAK2D,GAE5B5D,KAAK6D,gBAAgB5D,GAErBD,KAAKO,YAAYuB,MAAM7B,IAAKA,EAAK2D,KAAMA,KAG3C/C,EAAEiD,aAAe,SAAU7D,GAEvB,IAAK,GAAI8D,GAAI,EAAGC,EAAIhE,KAAKO,YAAYoB,OAAYqC,EAAJD,IAASA,EAElD,GAAI/D,KAAKO,YAAYwD,GAAG9D,MAAQA,EAE5B,MAAOD,MAAKO,YAAYwD,IAKpClD,EAAEgD,gBAAkB,SAAU5D,GAE1B,IAAK,GAAI8D,GAAI,EAAGA,EAAI/D,KAAKO,YAAYoB,SAAUoC,EAEvC/D,KAAKO,YAAYwD,GAAG9D,MAAQA,GAE5BD,KAAKO,YAAYqB,OAAOmC,IAAK,IAKzClD,EAAEU,cAAgB,SAAUtB,EAAKgE,GAE7B,GAAIC,GAAKlE,KAAK8D,aAAa7D,EAE3B,OAAIiE,IAAqC,KAA/BA,EAAGN,KAAKtC,QAAQ2C,IAEf,GAGJ,GAOXpD,EAAEI,QAAU,SAAUhB,GAElB,GAAIkE,GAAYlE,EAAImE,aAAenE,EAAImE,YAAYnD,SAAW2B,MAAMyB,QAAQpE,GAAO2C,MAAM3B,QAAUC,OAAOD,OAC1GkD,GAAUlE,EAAKD,KAAKS,cAGxBI,EAAEY,UAAY,SAAUxB,GAEpB,GAAIqE,GAAcrE,EAAImE,aAAenE,EAAImE,YAAY3C,WAAamB,MAAMyB,QAAQpE,GAAO2C,MAAMnB,UAAYP,OAAOO,SAChH6C,GAAYrE,EAAKD,KAAKS,cAG1BZ,EAAiBM,aAAe,WAE5B,MAA+B,kBAApBe,QAAc,SAA8C,kBAAnB0B,OAAa,QAEtD,SAEF2B,OAAOC,UAA4D,kBAAzCA,UAAmC,4BAChC,kBAA3BD,QAAqB,gBAAqD,kBAA1BA,QAAoB,cAEpE,WAGJ,GAcX1D,EAAET,eAAiB,WA+Bf,QAASqE,GAAWxE,GAEhB,MAAkC,KAA3ByE,EAAUpD,QAAQrB,GAG7B,QAAS0E,GAAW1E,GAEhB,IAAIwE,EAAWxE,GAAf,CAIA,GAAIsD,GAAOvD,KAAM4E,EAAW,GAAIC,gBAAe5E,EAE/CyE,GAAU5C,KAAK7B,GACf6E,EAAUhD,KAAK8C,GAEfA,EAASG,KAAK,SAASC,EAAOhC,EAASiC,EAASC,GAE5C,GAAIxD,KAEJR,QAAOC,KAAK6D,GAAO5D,QAAQ,SAAS+D,GAChCzD,EAAQI,MAAMC,OAAO9B,EAAKyC,KAAM,MAAOV,KAAMmD,MAGjDjE,OAAOC,KAAK6B,GAAS5B,QAAQ,SAAS+D,GAClCzD,EAAQI,MAAMC,OAAO9B,EAAKyC,KAAM,SAAUV,KAAMmD,EAAUxC,SAAUuC,EAAcC,OAGtFjE,OAAOC,KAAK8D,GAAS7D,QAAQ,SAAS+D,GAClCzD,EAAQI,MAAMC,OAAO9B,EAAKyC,KAAM,SAAUV,KAAMmD,EAAUxC,SAAUuC,EAAcC,OAGtF5B,EAAK9C,YAAYiB,MAIzB,QAAS0D,GAAWC,GAEhB,IAAIZ,EAAWY,GAAf,CAIA,GAAI9B,GAAOvD,KAAM4E,EAAW,GAAIU,eAAcD,EAE9CX,GAAU5C,KAAKuD,GACfP,EAAUhD,KAAK8C,GAEfA,EAASG,KAAK,SAASQ,GAEnBA,EAAQnE,QAAQ,SAASQ,GAErBA,EAAOG,OAASsD,EAChBzD,EAAOc,KAAO,WAGlBa,EAAK9C,YAAY8E,MApFzB,IAAIvF,KAAKwF,qBAAT,CAGAxF,KAAKwF,sBAAuB,EAC5BxF,KAAKyF,WAAY,CAEjB,IAAIX,MAAgBJ,IAEpB1E,MAAKiC,IAAM,WAEPuC,SAASkB,8BAGb1F,KAAKiB,QAAU,SAAUhB,GAErB2C,MAAMyB,QAAQpE,GAAOmF,EAAW3B,KAAKzD,KAAMC,GAAO0E,EAAWlB,KAAKzD,KAAMC,IAG5ED,KAAKyB,UAAY,SAAUxB,GAEvB,GAAI0F,GAAMjB,EAAUpD,QAAQrB,EAEhB,MAAR0F,IAEAjB,EAAU9C,OAAO+D,EAAK,GACtBb,EAAUlD,OAAO+D,EAAK,GAAG,GAAGC,YAiEjC/F"}